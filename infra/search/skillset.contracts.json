{
  "name": "contracts-skillset",
  "description": "Extract text, redact PII, and produce embeddings for contract documents.",
  "skills": [
    {
      "@odata.type": "#Microsoft.Skills.Text.OcrSkill",
      "context": "/document/pages/*",
      "defaultLanguageCode": "en",
      "inputs": [ { "name": "image", "source": "/document/pages/*/image" } ],
      "outputs": [ { "name": "text", "targetName": "ocrText" } ]
    },
    {
      "@odata.type": "#Microsoft.Skills.Text.EntityRecognitionSkill",
      "context": "/document",
      "categories": [ "Person", "Email", "PhoneNumber" ],
      "inputs": [ { "name": "text", "source": "/document/pages/*/ocrText" } ],
      "outputs": [ { "name": "entities", "targetName": "entities" } ]
    },
    {
      "@odata.type": "#Microsoft.Skills.Text.PiiDetectionSkill",
      "context": "/document",
      "inputs": [ { "name": "text", "source": "/document/pages/*/ocrText" } ],
      "outputs": [ { "name": "text", "targetName": "redactedText" } ]
    },
    {
      "@odata.type": "#Microsoft.Skills.Custom.AzureOpenAIEmbeddingSkill",
      "description": "Generate vector embeddings for contract text using Azure OpenAI",
      "context": "/document/pages/*",
      "inputs": [ { "name": "text", "source": "/document/pages/*/ocrText" } ],
      "outputs": [ { "name": "embedding", "targetName": "pageEmbedding" } ],
      "azureOpenAIParameters": {
        "resourceUri": "${AZURE_OPENAI_ENDPOINT}",
        "deploymentId": "${AZURE_OPENAI_EMBED_DEPLOYMENT}",
        "apiKey": "${AZURE_OPENAI_API_KEY}"
      }
    }
  ]
}
